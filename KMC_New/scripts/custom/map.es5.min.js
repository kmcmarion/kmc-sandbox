"use strict";function buildLocationList(n){var r=[],f,o,u,s,t,l;for(c=0;c<n.features.length;c++)r.map(function(n){return n.city}).indexOf(n.features[c].properties.city)===-1&&(f={},f.city=n.features[c].properties.city,f.coord=n.features[c].properties.coords,r.push(f));for(o=document.getElementById("listings"),e=0;e<r.length;e++)u=o.appendChild(document.createElement("div")),u.className="cities",header=u.appendChild(document.createElement("h4")),header.className="text-orange",header.innerHTML=r[e].city,header.setAttribute("data-toggle","collapse"),s=r[e].city.replace(/ +/g,""),header.setAttribute("data-target","#city-"+s),collapseContainer=u.appendChild(document.createElement("div")),collapseContainer.className="collapse",collapseContainer.id="city-"+s,u.appendChild(document.createElement("hr")),header.style="color: #fff;",header.addEventListener("click",function(n){displayedCity=o.getElementsByClassName("show");displayedCity.length>=1&&document.getElementById(displayedCity[0].id).setAttribute("class","collapse");var t=n.srcElement.innerHTML;cityIndex=r.map(function(n){return n.city}).indexOf(t);featuredCity=r[cityIndex];flyToCity(featuredCity)});for(i=0;i<n.features.length;i++){var a=n.features[i],h=a.properties,v=h.city.replace(/ +/g,""),y=document.getElementById("city-"+v),p=y.appendChild(document.createElement("div"));t=p.appendChild(document.createElement("a"));t.href="javascript:";t.style="color: #fff; cursor:pointer;";t.className="title building-link";t.dataPosition=i;t.innerHTML=h.buildingName;l=t.appendChild(document.createElement("div"));l.className="listing-details";t.addEventListener("click",function(t){var i=n.features[t.srcElement.dataPosition];flyToStore(i);createPopUp(i)})}}function flyToCity(n){map.flyTo({center:n.coord,zoom:13})}function flyToStore(n){map.flyTo({center:n.geometry.coordinates,zoom:15})}function createPopUp(n){var t=document.getElementsByClassName("mapboxgl-popup"),i;t[0]&&t[0].remove();i=new mapboxgl.Popup({closeOnClick:!1}).setLngLat(n.geometry.coordinates).setHTML('<h3 style="color: #000;"><a href="'+n.properties.link+'">'+n.properties.buildingName+'<\/a><\/h3><p style="color: #000">'+n.properties.address+'<\/p><a href="tel:'+n.properties.phone+'">'+n.properties.phone+"<\/a>").addTo(map)}mapboxgl.accessToken="pk.eyJ1IjoiY2Fyb2xkZXN0cmV6YSIsImEiOiJjanp3OGo4cHEwbmduM2hwZnNuZDJzZWxyIn0.rF-a4FSzqc5PhileOuq7jg";var map=new mapboxgl.Map({container:"map",style:"mapbox://styles/mapbox/light-v10",center:[121.046001,14.549944],zoom:18}),branches={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[121.05428,14.5561]},properties:{buildingName:"Uptown Place Tower 2",phone:"(02) 8779 6540",address:"19th & 20th Floor, Uptown Place Tower 2, 11th Ave Uptown, Taguig, Metro Manila",city:"BGC",link:"/bgc-taguig/uptown-place-tower-2/",coords:[121.049569,14.545188]}},{type:"Feature",geometry:{type:"Point",coordinates:[121.04301,14.53518]},properties:{buildingName:"Cyber Sigma",phone:"(02) 8779 6540",address:"19th & 20th Floor, Robinson's Cyber Sigma, Lawton Ave, Taguig, 1630 Metro Manila",city:"BGC",link:"/bgc-taguig/cyber-sigma/",coords:[121.049569,14.545188]}},{type:"Feature",geometry:{type:"Point",coordinates:[121.05292,14.54511]},properties:{buildingName:"SM Aura Office Tower",phone:"(02) 8779 6540",address:"11th Floor, SM Aura Business Tower,, 26th St., McKinley Parkway, Bonifacio Global City,, Taguig, Metro Manila",city:"BGC",link:"/bgc-taguig/sm-aura-office-tower/",coords:[121.049569,14.545188]}},{type:"Feature",geometry:{type:"Point",coordinates:[121.04597,14.54993]},properties:{buildingName:"Picadilly Star",phone:"(02) 8779 6540",address:"25th Floor, Picadilly Star Building, 4th Avenue, corner 27th Street, Bonifacio Global City, Taguig, 1634 Metro Manila",city:"BGC",link:"/bgc-taguig/picadilly-star/",coords:[121.049569,14.545188]}},{type:"Feature",geometry:{type:"Point",coordinates:[121.04621,14.54786]},properties:{buildingName:"Sun Life Centre",phone:"(02) 8779 6540",address:"8th Floor, Sun Life Centre Building, 5th Avenue, Bonifacio Global City, Taguig, 1634 Metro Manila",city:"BGC",link:"/bgc-taguig/sun-life-centre/",coords:[121.049569,14.545188]}},{type:"Feature",geometry:{type:"Point",coordinates:[121.04704,14.55296]},properties:{buildingName:"Four/NEO",phone:"(02) 8779 6540",address:"4th Ave, Taguig, 1630 Metro Manila",city:"BGC",link:"/bgc-taguig/four-neo/",coords:[121.049569,14.545188]}},{type:"Feature",geometry:{type:"Point",coordinates:[121.05122,14.55243]},properties:{buildingName:"Ore Central",phone:"(02) 8779 6540",address:"11th and 12th Floors, ORE Central, 31st Street, Taguig, 1634 Metro Manila",city:"BGC",link:"/bgc-taguig/ore-central/",coords:[121.049569,14.545188]}},{type:"Feature",geometry:{type:"Point",coordinates:[121.02477,14.56033]},properties:{buildingName:"V Corporate Centre",phone:"(02) 8779 6540",address:"5th & 9th Floor, V Corporate Centre,, L.P. Leviste Street, Salcedo Village,, Makati, 1227 Metro Manila",city:"Makati",link:"/makati/v-corporate-centre/",coords:[121.025867,14.557385]}},{type:"Feature",geometry:{type:"Point",coordinates:[121.02351,14.5609]},properties:{buildingName:"Frabelle Corporate Plaza",phone:"(02) 8779 6540",address:"18th Floor, Frabelle Corporate Plaza, 129, Bautista, Makati, 1227 Metro Manila",city:"Makati",link:"/makati/frabelle-corporate-plaza/",coords:[121.025867,14.557385]}},{type:"Feature",geometry:{type:"Point",coordinates:[121.01823,14.55803]},properties:{buildingName:"Rufino Pacific Tower",phone:"(02) 8779 6540",address:"14-B & 29th Floor, Rufino Pacific Tower, 6784 Ayala Ave, Legazpi Village, Makati, 1200 Metro Manila",city:"Makati",link:"/makati/rufino-pacific-tower/",coords:[121.025867,14.557385]}},{type:"Feature",geometry:{type:"Point",coordinates:[121.06356,14.58712]},properties:{buildingName:"UnionBank Plaza",phone:"(02) 8779 6540",address:"16th Floor, UnionBank Plaza, Ortigas Center, Pasig City, 1600 Metro Manila",city:"Ortigas",link:"/ortigas/unionbank-plaza/",coords:[121.059914,14.5844]}},{type:"Feature",geometry:{type:"Point",coordinates:[121.06776,14.5897]},properties:{buildingName:"Rockwell Business Center",phone:"(02) 8779 6540",address:"5th Floor & 6th Floor, Rockwell Business Center Tower 1, Ortigas Avenue, Pasig City, Pasig, 1604 Metro Manila",city:"Ortigas",link:"/ortigas/rockwell-business-center/",coords:[121.059914,14.5844]}},{type:"Feature",geometry:{type:"Point",coordinates:[121.06068,14.58718]},properties:{buildingName:"Robinsons Cyberscape Gamma",phone:"(02) 8779 6540",address:"15th Floor, Robinsons Cyberscape Gamma, Topaz &, Ruby Rd, Ortigas Center, Ortigas, 1600 Metro Manila",city:"Ortigas",link:"/ortigas/robinsons-cyberscape-gamma/",coords:[121.059914,14.5844]}},{type:"Feature",geometry:{type:"Point",coordinates:[121.06834,14.58969]},properties:{buildingName:"Rockwell Business Center Tower 3",phone:"(02) 8779 6540",address:"8th Floor Rockwell Business Center Tower 3, Ortigas Ave, Pasig, 1604 Metro Manila",city:"Ortigas",link:"/ortigas/rockwell-business-center-tower-3/",coords:[121.059914,14.5844]}},{type:"Feature",geometry:{type:"Point",coordinates:[121.05951,14.586251]},properties:{buildingName:"Podium West Tower",phone:"(02) 8779 6540",address:"25th and 26th Floors, The Podium, Lower, Ortigas Center, Pasig City",city:"Mandaluyong",link:"/mandaluyong/podium-west-tower/",coords:[121.05951,14.586251]}},{type:"Feature",geometry:{type:"Point",coordinates:[121.05517,14.57635]},properties:{buildingName:"Rockwell Sheridan 1",phone:"(02) 8779 6540",address:"10th Floor, Rockwell Business Center Sheridan Tower 1, Sheridan & United Street, Mandaluyong, 1554 Metro Manila",city:"Mandaluyong",link:"/mandaluyong/rockwell-sheridan-1/",coords:[121.04284,14.583199]}},{type:"Feature",geometry:{type:"Point",coordinates:[121.08142,14.591]},properties:{buildingName:"Robinsons Zeta Tower",phone:"(02) 8779 6540",address:"7th Floor, Robinsons Zeta Tower, C5 Road, Quezon City, 1800 Metro Manila",city:"Quezon City",link:"/quezon-city/robinsons-zeta-tower",coords:[121.0692,14.608199]}},{type:"Feature",geometry:{type:"Point",coordinates:[121.03659,14.41881]},properties:{buildingName:"One Griffinstone",phone:"(02) 8779 6540",address:"Alabang, Muntinlupa, Metro Manila",city:"Alabang",link:"/alabang/one-griffinstone/",coords:[121.043858,14.41728]}},{type:"Feature",geometry:{type:"Point",coordinates:[123.90637,10.33018]},properties:{buildingName:"Skyrise 4 Cebu IT Park",phone:"(02) 8779 6540",address:"18th Floor, W Geonzon St, Cebu City, Cebu",city:"Cebu",link:"/cebu/skyrise-4/",coords:[123.906996,10.321501]}},{type:"Feature",geometry:{type:"Point",coordinates:[123.90637,10.33015]},properties:{buildingName:"Skyrise 4B Cebu IT Park",phone:"(02) 8779 6540",address:"16th and 17th Floors, W Geonzon St, Cebu City, 6000 Cebu",city:"Cebu",link:"/cebu/skyrise-4b/",coords:[123.906996,10.321501]}},{type:"Feature",geometry:{type:"Point",coordinates:[122.5462,10.71714]},properties:{buildingName:"Festive Walk Office Tower",phone:"(02) 8779 6540",address:"Festive Walk Office Tower, 1 Megaworld Blvd, Mandurriao, Iloilo City, 5000 Iloilo",city:"Iloilo",link:"/iloilo/festive-walk-tower/",coords:[122.552041,10.716597]}},{type:"Feature",geometry:{type:"Point",coordinates:[120.573504,15.178493]},properties:{buildingName:"One West Aeropark",phone:"(02) 8779 6540",address:"Industrial Estate - 5, Clark Global City, Clark Freeport Zone, Mabalacat, 2023 Pampanga",city:"Clark",link:"/clark/one-west-aeropark/",coords:[120.573504,15.178493]}}]};map.on("load",function(){map.addSource("places",{type:"geojson",data:branches});buildLocationList(branches);branches.features.forEach(function(n){var t=document.createElement("div");t.className="marker";new mapboxgl.Marker(t,{offset:[0,-23]}).setLngLat(n.geometry.coordinates).addTo(map);t.addEventListener("click",function(t){flyToStore(n);createPopUp(n);t.stopPropagation()})})});